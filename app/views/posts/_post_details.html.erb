<div class="card bg-dark">
  <div class="card-header position-relative">
    <div class="d-flex align-items-center">
      <% if @post.user.avatar %>
        <%= link_to @post.user, class: 'stretched-link' do %>
          <%= image_tag @post.user.avatar(:small).url, width: 48, height: 48, class: 'rounded-circle me-3' %>
        <% end %>
      <% else %>
        <i class="fas fa-paw no-avatar__small me-3"></i>
      <% end %>

      <div>
        <h6 class="card-title"><%= @post.user.username %></h6>

        <h6 class="card-subtitle text-muted">
          <%# If post was created less than 7 days ago, then display relative time; otherwise, timestamp %>
          <% if @post.created_at < 7.days.ago %>
            <%= @post.created_at.strftime("#{@post.created_at.day.ordinalize} of %B, %Y") %>
          <% else %>
            <%= time_ago_in_words(@post.created_at) + ' ago' %>
          <% end %>
        </h6>
      </div>
    </div>
  </div>

  <% unless @post.body.empty? %>
    <div class="card-body markdown-body">
      <%= markdown(@post.body) %>
    </div>
  <% end %>

  <% if user_signed_in? %>
    <div class="card-footer">
      <%= link_to post_likes_path(@post), method: :post, class: @liked ? 'text-decoration-none me-2' : 'text-decoration-none link-secondary me-2' do %>
        <i class="fas fa-heart"></i> <%= @post.likes.empty? ? 'Like' : @post.likes.count %>
      <% end %>

      <%= link_to edit_post_path(@post), class: 'text-decoration-none link-secondary' do %>
        <i class="fas fa-edit"></i> Edit
      <% end if @post.user == current_user %>
    </div>
  <% end %>
</div>